//Player 헤더파일

#pragma once
#ifndef PLAYER_H
#define PLAYER_H

#include <string>
using namespace std;

class Player {
    string name;
public:
    Player(string n) : name(n) {}
    string getName() { return name; } 
};

#endif

//GamblingGame 헤더파일

#pragma once
#ifndef GAMBLINGGAME_H
#define GAMBLINGGAME_H

#include "Player.h"
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

class GamblingGame {
    Player* player1;
    Player* player2;

public:
    GamblingGame(Player* p1, Player* p2) : player1(p1), player2(p2) {}

    void play();

private:
    bool takeTurn(Player* player);
};

#endif

//GamblingGame 함수

#include "GamblingGame.h"

void GamblingGame::play() {
    srand((unsigned)time(0));  
    while (true) {
        if (takeTurn(player1)) break;
        if (takeTurn(player2)) break; 
    }
}

bool GamblingGame::takeTurn(Player* player) {
    cout << player->getName() << " <Enter> 키 입력" << endl;

    cin.get();

    int num1 = rand() % 3;
    int num2 = rand() % 3;
    int num3 = rand() % 3;

    cout << num1 << " " << num2 << " " << num3 << " ";

    if (num1 == num2 && num2 == num3) {
        cout << player->getName() << "님 승리!!" << endl;
        return true;
    }
    else {
        cout << "아쉽군요!" << endl;
        return false;
    }
}

//main 함수

#include <iostream>
#include "Player.h"
#include "GamblingGame.h"
using namespace std;

int main() {
    string name1, name2;

    cout << "***** 갬블링 게임을 시작합니다. *****" << endl;

    cout << "첫번째 선수 이름>>";
    cin >> name1;

    cout << "두번째 선수 이름>>";
    cin >> name2;

    Player p1(name1);
    Player p2(name2);

    GamblingGame game(&p1, &p2);
    game.play();

    return 0;
}
